/* SPDX-License-Identifier: GPL-2.0 */
/*
 * rt1316-sdw.h -- RT1316 ALSA SoC audio driver header
 *
 * Copyright(c) 2020 Realtek Semiconductor Corp.
 */

#ifndef __RT1316_SDW_H__
#define __RT1316_SDW_H__

/* v1.2 device */
#define RT1316_SDCA_ADDR(fun, ent, ctl, ch) (BIT(30) | ((fun & 0x7) << 22) | \
	((ent & 0x40) << 15) | ((ent & 0x3f) << 7) | ((ctl & 0x30) << 15) | \
	((ctl & 0x0f) << 3) | ((ch & 0x38) << 12) | (ch & 0x07))

static const struct reg_default rt1316_reg_defaults[] = {
	{ 0x0000, 0x00 },
	{ 0x0001, 0x00 },
	{ 0x0002, 0x00 },
	{ 0x0003, 0x00 },
	{ 0x0004, 0x00 },
	{ 0x0005, 0x01 },
	{ 0x0020, 0x00 },
	{ 0x0022, 0x00 },
	{ 0x0023, 0x00 },
	{ 0x0024, 0x00 },
	{ 0x0025, 0x00 },
	{ 0x0026, 0x00 },
	{ 0x0030, 0x00 },
	{ 0x0032, 0x00 },
	{ 0x0033, 0x00 },
	{ 0x0034, 0x00 },
	{ 0x0035, 0x00 },
	{ 0x0036, 0x00 },
	{ 0x0040, 0x00 },
	{ 0x0041, 0x00 },
	{ 0x0042, 0x00 },
	{ 0x0043, 0x00 },
	{ 0x0044, 0x20 },
	{ 0x0045, 0x00 },
	{ 0x0046, 0x01 },
	{ 0x0048, 0x00 },
	{ 0x0049, 0x00 },
	{ 0x004d, 0x01 },
	{ 0x0050, 0x30 },
	{ 0x0051, 0x02 },
	{ 0x0052, 0x5d },
	{ 0x0053, 0x13 },
	{ 0x0054, 0x16 },
	{ 0x0055, 0x01 },
	{ 0x0058, 0x00 },
	{ 0x0059, 0x00 },
	{ 0x005a, 0x00 },
	{ 0x005b, 0x00 },
	{ 0x005c, 0x00 },
	{ 0x005d, 0x00 },
	{ 0x005e, 0x00 },
	{ 0x005f, 0x00 },
	{ 0x0062, 0x03 },
	{ 0x0072, 0x03 },
	{ 0x0100, 0x00 },
	{ 0x0101, 0x00 },
	{ 0x0102, 0x20 },
	{ 0x0103, 0x00 },
	{ 0x0104, 0x00 },
	{ 0x0105, 0x03 },
	{ 0x0120, 0x00 },
	{ 0x0122, 0x00 },
	{ 0x0123, 0x00 },
	{ 0x0124, 0x00 },
	{ 0x0125, 0x00 },
	{ 0x0126, 0x00 },
	{ 0x0127, 0x00 },
	{ 0x0130, 0x00 },
	{ 0x0132, 0x00 },
	{ 0x0133, 0x00 },
	{ 0x0134, 0x00 },
	{ 0x0135, 0x00 },
	{ 0x0136, 0x00 },
	{ 0x0137, 0x00 },
	{ 0x0200, 0x00 },
	{ 0x0201, 0x00 },
	{ 0x0202, 0x00 },
	{ 0x0203, 0x00 },
	{ 0x0204, 0x00 },
	{ 0x0205, 0x03 },
	{ 0x0220, 0x00 },
	{ 0x0222, 0x00 },
	{ 0x0223, 0x00 },
	{ 0x0224, 0x00 },
	{ 0x0225, 0x00 },
	{ 0x0226, 0x00 },
	{ 0x0227, 0x00 },
	{ 0x0230, 0x00 },
	{ 0x0232, 0x00 },
	{ 0x0233, 0x00 },
	{ 0x0234, 0x00 },
	{ 0x0235, 0x00 },
	{ 0x0236, 0x00 },
	{ 0x0237, 0x00 },
	{ 0x0f00, 0x00 },
	{ 0x0f01, 0x00 },
	{ 0x0f02, 0x20 },
	{ 0x0f03, 0x00 },
	{ 0x0f04, 0x00 },
	{ 0x0f05, 0x03 },
	{ 0x0f20, 0x00 },
	{ 0x0f22, 0x00 },
	{ 0x0f23, 0x00 },
	{ 0x0f24, 0x00 },
	{ 0x0f25, 0x00 },
	{ 0x0f26, 0x00 },
	{ 0x0f27, 0x00 },
	{ 0x0f30, 0x00 },
	{ 0x0f32, 0x00 },
	{ 0x0f33, 0x00 },
	{ 0x0f34, 0x00 },
	{ 0x0f35, 0x00 },
	{ 0x0f36, 0x00 },
	{ 0x0f37, 0x00 },

	{ 0x3201, 0x00 },
	{ 0x3202, 0x00 },
	{ 0x3203, 0x01 },
	{ 0x3204, 0x07 },
	{ 0x3205, 0x00 },
	{ 0x3206, 0x00 },
	{ 0x3207, 0x00 },
	{ 0x3208, 0x09 },
	{ 0x3209, 0x09 },
	{ 0x320a, 0x00 },
	{ 0x320b, 0x00 },
	{ 0x320c, 0x00 },
	{ 0x320d, 0x00 },
	{ 0x320e, 0x00 },

	{ 0xc000, 0x00 },
	{ 0xc001, 0x00 },
	{ 0xc002, 0x00 },
	{ 0xc003, 0x00 },
	{ 0xc004, 0x00 },
	{ 0xc005, 0x00 },
	{ 0xc006, 0x00 },
	{ 0xc007, 0x00 },
	{ 0xc008, 0x00 },
	{ 0xc009, 0x00 },
	{ 0xc00a, 0x00 },
	{ 0xc00b, 0x00 },
	{ 0xc00c, 0x00 },
	{ 0xc00d, 0x00 },
	{ 0xc00e, 0x00 },
	{ 0xc00f, 0x00 },
	{ 0xc010, 0xa5 },
	{ 0xc011, 0x00 },
	{ 0xc012, 0xff },
	{ 0xc013, 0xff },
	{ 0xc014, 0x40 },
	{ 0xc015, 0x00 },
	{ 0xc016, 0x00 },
	{ 0xc017, 0x00 },

	{ 0xc605, 0x30 },
	{ 0xc700, 0x0a },
	{ 0xc701, 0xaa },
	{ 0xc702, 0x1a },
	{ 0xc703, 0x0a },
	{ 0xc710, 0x80 },
	{ 0xc711, 0x00 },
	{ 0xc712, 0x3e },
	{ 0xc713, 0x80 },
	{ 0xc714, 0x80 },
	{ 0xc715, 0x06 },
	{ 0xd101, 0x00 },
	{ 0xd102, 0x30 },
	{ 0xd103, 0x00 },

	{ RT1316_SDCA_ADDR(0x4, 0x2, 0x10, 0x0), 0x00 },
	{ RT1316_SDCA_ADDR(0x4, 0x3, 0x1, 0x1), 0x01 },
	{ RT1316_SDCA_ADDR(0x4, 0x3, 0x1, 0x2), 0x01 },
	{ RT1316_SDCA_ADDR(0x4, 0x24, 0x1, 0x0), 0x01 },
	{ RT1316_SDCA_ADDR(0x4, 0x31, 0x1, 0x0), 0x03 },
	{ RT1316_SDCA_ADDR(0x4, 0x33, 0x1, 0x0), 0x03 },
	{ RT1316_SDCA_ADDR(0x4, 0x34, 0x1, 0x0), 0x03 },
};

struct rt1316_sdw_priv {
	struct snd_soc_component *component;
	struct regmap *regmap;
	struct sdw_slave *sdw_slave;
	enum sdw_slave_status status;
	struct sdw_bus_params params;
	bool hw_init;
	bool first_hw_init;
	int rx_mask;
	int slots;
};

struct sdw_stream_data {
	struct sdw_stream_runtime *sdw_stream;
};

#endif /* __RT1316_SDW_H__ */
